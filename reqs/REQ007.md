# REQ007: Percent Format for Jupyter Notebook Like Document

为记录 Jupyter Notebook 到文本文件中， Jupyter 社区提出 Jupyter Text 项目，支持多种文本形式， Percent 是其中一种。

使用 %% 表示 Cell 的开始， 全部格式为 %% Optional title [cell type] key="value"

- 需要注意，如果基础文档是 编程语言，则 percent heading 部分需要在注释内，即：

    - `# %% Optional title [cell type] key="value"`

- 且该 cell 的其他部分，也必须在注释内

NOTE: 在 Jupyter 中 Cell 的 Output 是 Cell 本身的一部分

```percent
%%% [output:stdout] session_id=xxxx
```

## Agent 定义

```percent
%% xxxx [markdown] definition="agent" name="custom-agent"
```

用于在对话上下文中，定义一个 agent. 目前将 Agent 视为 System Prompt + 推理参数的容器。


```percent
%% xxxx [markdown] definition="agent" name="custom-agent"
---
models: [deepseek-v3]
context_window: 200000
max_output_tokens: 8192
reasoning: true
use_temperature: true
temperature: 0.7
---
# Custom Agent
This is an ad-hoc generated agent with specific capabilities...
```

## 标准对话：用户输入

```percent
%% xxxx [markdown] key="value" history=none | exclude | 0 | false
```

xxx 为可选，无实际意义， key=value 遵从 jupyter text 风格

history 为是否记录对话历史， none | exclude | 0 | false 表示不记录


## 标准对话：LLM 的输出

```percent
%%% [output:stdout] agent="custom-agent" session_id=xxxx
```

Jupyter 中存在两种 输出机制， stdout | stderr 。 对于 LLM 推理这个场景，仅支持 stdout 。

- 前序使用 三个 %%% ， 表示 缩进 | 归属关系。
- agent 为当前结果由那个 agent 输出， session_id agent 推理使用的 session





